(function(){var A=function(){var B=this;this.utils={uidcount:0,GenerateUID:function(){this.uidcount++;var C="pwlid_N"+this.uidcount+"_Q"+Math.round(Math.random()*100000);return C}};this.SetImageSourceOnClick=function(D,C){$(D).click(function(E){this.attr("src",C)})};this.Dialog=function(C,D){this.elements={};this.options={};this.Create=function(F,G){var E={bgOpacity:50,overlayId:"pwDialogOverlay",windowId:"pwDialogWindow",windowCss:{}};$.extend(E,G);this.options=E;this.elements.overlay=$("<div></div>").attr("id",this.options.overlayId).css({opacity:this.options.bgOpacity/100,width:"100%",height:"100%",position:"fixed",margin:0,padding:0,left:0,top:0,zIndex:3000,backgroundColor:"#000"}).appendTo("body").hide().fadeIn("slow");this.elements.window=$("<div></div>").attr("id",this.options.windowId).css($.extend(this.options.windowCss,{zIndex:3100,position:"fixed"})).append(F).appendTo("body").hide().fadeIn("slow")};this.Close=function(){this.elements.window.remove();this.elements.overlay.remove()};this.Create(C,D)};this.AddTooltip=function(I,H,F){var G=$("#"+I);if(!G){return false}if(!C){C={unused:true}}if(!H){H='<img src="http://planetwars.licho.eu/minimaps/Dead%20Reef%20Dry.smf.jpg" width="300" height="150" /><br />Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Suspendisse blandit convallis magna. Integer ultricies libero sit amet orci. Vivamus neque pede, hendrerit sit amet, congue at, vulputate commodo, arcu. Etiam sit amet nisl at arcu eleifend cursus. Praesent accumsan, mauris sed placerat pulvinar, felis erat vehicula dui, non lacinia ante ipsum vitae leo. Suspendisse in nibh a tellus consectetuer lacinia. Ut orci est, hendrerit eget, malesuada rutrum, blandit sed, mauris. Curabitur auctor mattis ante. Suspendisse ultricies. Nunc hendrerit mi ac odio. Duis volutpat rutrum felis. Mauris fermentum, lorem et imperdiet tempus, nulla purus pellentesque diam, fringilla tempor justo sem in quam. Nulla facilisi. Integer convallis est at elit. Nulla vel arcu. Praesent vitae nisl eu tortor lobortis suscipit. Nullam vulputate libero et augue. '}var C={OffsetX:25,OffsetY:2,myclass:"",image:{src:"http://google.com/google.jpg",width:354,height:116}};$.extend(C,F);var D=B.utils.GenerateUID();var E=$('<div id="'+D+'"><div>'+H+"</div></div");E.appendTo($("body")).addClass(C.myclass,"").hide();G.hover(function(J){E.stop().show().css("position","absolute").css("top",(J.pageY+C.OffsetY)+"px").css("left",(J.pageX+C.OffsetX)+"px").fadeTo("fast",1)},function(){E.stop().fadeTo("fast",0).css({display:"none"})});G.mousemove(function(J){E.css("top",J.pageY+C.OffsetY+"px").css("left",J.pageX+C.OffsetX+"px")})};this.graphics={uid:"undQI001",color:"#0000ff",stroke:3,thtm:"",canvas:false,canvasDIV:false,lineCount:0,init:function(){this.uid=B.utils.GenerateUID();this.canvas=$('<div id="'+this.uid+'"></div>');this.canvas.appendTo("body");this.canvasDIV=document.getElementById(this.uid)},_MakeDiv:function(C,G,D,E,F){this.lineCount++;this.thtm+=['<div style="z-index:',F,"; position:absolute; left:",C,"px; top:",G,"px; width:",D,"px; height:",E,"px; background-color: ",this.color,';"></div>'].join("")},SetStroke:function(C){this.stroke=C},SetColor:function(C){this.color=C},Paint:function(){this.canvasDIV.innerHTML=this.thtm;this.thtm=""},Clear:function(){this.canvas.html("");this.thtm=""},DrawLine:function(T,D,S,C,R){if(T>S){var H=S;var P=C;S=T;C=D;T=H;D=P}var L=S-T,K=Math.abs(C-D),J=T,I=D,O=(D>C)?-1:1;var M=this.stroke;if(L>=K){if(L>0&&M-3>0){var U=(M*L*Math.sqrt(1+K*K/(L*L))-L-(M>>1)*K)/L;U=(!(M-4)?Math.ceil(U):Math.round(U))+1}else{var U=M}var V=Math.ceil(M/2);var Q=K<<1,G=Q-(L<<1),N=Q-L,F=J;while(L>0){--L;++J;if(N>0){this._MakeDiv(F,I,J-F+V,U,R);I+=O;N+=G;F=J}else{N+=Q}}this._MakeDiv(F,I,S-F+V+1,U,R)}else{if(M-3>0){var U=(M*K*Math.sqrt(1+L*L/(K*K))-(M>>1)*L-K)/K;U=(!(M-4)?Math.ceil(U):Math.round(U))+1}else{var U=M}var V=Math.round(M/2);var Q=L<<1,G=Q-(K<<1),N=Q-K,E=I;if(C<=D){++V;while(K>0){--K;if(N>0){this._MakeDiv(J++,I,U,E-I+V,R);I+=O;N+=G;E=I}else{I+=O;N+=Q}}this._MakeDiv(S,C,U,E-C+V,R)}else{while(K>0){--K;I+=O;if(N>0){this._MakeDiv(J++,E,U,I-E+V,R);N+=G;E=I}else{N+=Q}}this._MakeDiv(S,E,U,C-E+V+1,R)}}}};this.init=function(){this.graphics.init()}};window.PW=new A()})();