 @model ZeroKWeb.Controllers.HomeController.IndexResult
@{
  Page.Title = "Zero-K main site";
  var s = Model.Spotlight;
  var stat = @Model.LobbyStats;
}

@if (!ZeroKWeb.Global.IsLobbyAccess) {
  @(stat.UsersIdle+stat.UsersWaiting+stat.UsersFighting) @:players in game: @stat.UsersFighting players fighting in @stat.BattlesRunning battles, @stat.UsersWaiting waiting for battle, @stat.UsersIdle idling in chat
}

<div id="content" class="fleft width-70">
  <div id="features" class="border textwall">
    
    @if (ZeroKWeb.Global.IsAccountAuthorized) {
      Html.RenderPartial("UserDetail", ZeroKWeb.Global.Account);
    } else {
      @Html.IncludeWiki("Features")
    }
  </div>
  <div id="news" class="border">
    @Html.IncludeWiki("News")
  </div>
</div>
<div id="sidebar" class="fright width-30">
  <div id="unit" class="border relative text-left">
    <h2>
      <a href='/Wiki.mvc/Manual'>Manual: </a>
    </h2>
    <h3>@s.Name</h3>
    <!-- <span class="absright abstop bold button"> <a>&lt;&lt;</a> <a>?</a> <a>&gt;&gt;</a> </span> -->
    <img src="/img/unitpics/@(s.Unitname).png" width="64" height="51" class="fright"/>
    <p>@s.Title</p>
    <p>@s.Description</p>
  </div>
  <!close unit>

    <div class="border">
  <h2><a href='/Forum.mvc'>Forums</a></h2>
  @foreach (var t in Model.NewThreads) {
    var link = Html.ActionLink(t.ForumThread.Title, "Thread", "Forum", new {id = t.ForumThread.ForumThreadID},new {title="$thread$" + t.ForumThread.ForumThreadID});
    if (t.WasWritten) {
      <b>* @link</b><br />
    } else if (t.WasRead) { 
     <i>* @link</i><br />
    } else { 
     <span>* @link</span><br />
    }
  }

  </div>

  <div id="topten" class="border">
    <h2>
      Top Players</h2>
    <table cellpadding='0' cellspacing='0'>

      <tr>
        <th width="30" align="left">
          #
        </th>
        <th width="200" align="left">
          Name
        </th>
        <th>
          ELO
        </th>
      </tr>

      @{var cnt = 1;}
      @foreach (var a in Model.Top10Players) {
        <tr>
        <td>@(cnt++)</td>
        <td><small>@Html.PrintAccount(a)</small></td>
        <td>@Math.Round(a.Elo)</td>
        </tr>      
      }
    </table>
  </div>
  <div class="border">
    <h2><a href='http://code.google.com/p/zero-k/'>Help us</a></h2>
    @Html.IncludeWiki("LookingFor")
  </div>
  
  <div class="faceplugin">
    <h2><a href="http://www.facebook.com/ZeroK.RTS">Social Media</a></h2>
    <br />
    <iframe src="http://www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2FZeroK.RTS&amp;width=236&amp;colorscheme=dark&amp;show_faces=true&amp;stream=false&amp;header=false&amp;height=435" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:236px; height:435px;" allowTransparency="true"></iframe>
  </div>  
  
  <!--div id="poll" class="border">
    <h2>
      <a>Poll</a></h1> What is your favorite kind of cake?
      <form action="poll.php">
      <ul class="poll">
        <li>
          <input type="radio" class="radio" name="option" value="Vanilla" checked />
          Vanilla </li>
        <li>
          <input type="radio" class="radio" name="option" value="Chocolate" />
          Chocolate </li>
        <li>
          <input type="radio" class="radio" name="option" value="Strawberry" />
          Strawberry </li>
        <li>
          <input type="radio" class="radio" name="option" value="Lemon" />
          Lemon </li>
        <li>
          <input type="radio" class="radio" name="option" value="Wrong" />
          The Cake is a Lie </li>
      </ul>
      <center>
        <input type="submit" value="vote" class="button border" /></center>
      </form>
  </div-->
  <!close poll>
</div>
